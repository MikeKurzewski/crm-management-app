# Dashboard App Refactor Todo List

- [x] Analyze requirements and existing codebase
- [x] Fetch latest docs for:
  - Next.js App Router (v15+): server components, async cookies()/params, Route Handlers
  - shadcn/ui with Tailwind v4
  - Supabase + @supabase/ssr server/browser clients
- [x] Plan and update file/route structure:
  - [x] /src/app/(protected)/app/[orgId]/page.tsx (org dashboard home)
  - [x] /src/app/(protected)/app/[orgId]/org/page.tsx (org details)
  - [x] /src/app/(protected)/app/profile/page.tsx (profile edit)
  - [x] /src/app/api/orgs/[id]/route.ts (GET/PUT org API)
  - [x] /src/components/shell/Topbar.tsx
  - [x] /src/components/shell/Sidebar.tsx
  - [x] /src/components/org/OrgSwitcher.tsx
  - [x] /src/components/org/OrgForm.tsx
  - [x] /src/components/nav/AppNav.tsx
  - [x] /src/components/profile/ProfileCard.tsx
  - [x] /src/components/profile/EditProfileForm.tsx
  - [x] /src/components/ui/select.tsx
  - [x] /src/components/ui/avatar.tsx
  - [x] /src/components/ui/separator.tsx
  - [x] /src/components/ui/command.tsx
- [x] Implement dashboard shell layout (Topbar, Sidebar, content)
- [x] Implement org-aware routing and redirection
- [x] Implement Org Switcher (Select/Command)
- [x] Implement Organisation page (admin/member views, edit form, invite)
- [x] Implement Profile page and edit form
- [x] Implement API route for org update (admin-only PUT)
- [x] Enforce admin-only UI (frontend and backend)
- [x] Add/Update shadcn/ui components as needed
- [x] Create new migration: supabase/migrations/*_dashboard_metadata.sql
  - [x] ALTER TABLE for organizations and profiles
  - [x] RLS policy for profiles update
- [x] Update README:
  - [x] New navigation structure & routes
  - [x] Org edit/admin behavior
  - [x] Profile edit notes
  - [x] Reminder about async cookies() and params in Next 15
  - [x] Short test plan
- [x] Test implementation against acceptance criteria
